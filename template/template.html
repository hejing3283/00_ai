<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RSS News Summary</title>
    <style>
        .wordcloud-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin-bottom: 30px;
        }
        .wordcloud {
            max-width: 800px;
            margin: 10px;
            text-align: center;
        }
        .news-item {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .similar-news {
            margin-left: 20px;
            padding: 10px;
            background-color: #f5f5f5;
        }
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <h1>RSS News Summary</h1>
    
    <!-- 添加调试信息 -->
    {% if title_cloud %}
    <div class="wordcloud-container">
        <div class="wordcloud">
            <h2>Title Word Cloud</h2>
            <img src="data:image/png;base64,{{ title_cloud }}" alt="Title Word Cloud">
        </div>
        <div class="wordcloud">
            <h2>Summary Word Cloud</h2>
            <img src="data:image/png;base64,{{ summary_cloud }}" alt="Summary Word Cloud">
        </div>
        <div class="wordcloud">
            <h2>Combined Word Cloud</h2>
            <img src="data:image/png;base64,{{ combined_cloud }}" alt="Combined Word Cloud">
        </div>
    </div>
    {% else %}
    <p>No word cloud data available</p>
    {% endif %}

    <h2>Clustered News</h2>
    {% if clustered_news %}
        {% for news in clustered_news %}
        <div class="news-item">
            <h3><a href="{{ news.main_link }}">{{ news.main_title }}</a></h3>
            <p>{{ news.main_summary }}</p>
            
            {% if news.similar_items %}
            <div class="similar-news">
                <h4>Similar News:</h4>
                {% for item in news.similar_items %}
                <div>
                    <h5><a href="{{ item.link }}">{{ item.title }}</a></h5>
                    <p>{{ item.summary }}</p>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
    <p>No news items available</p>
    {% endif %}

    <!-- 添加调试信息 -->
    <div style="display:none">
        Debug Info:
        Title cloud exists: {{ title_cloud is defined and title_cloud }}
        Clustered news count: {{ clustered_news|length if clustered_news else 0 }}
    </div>
</body>
</html>